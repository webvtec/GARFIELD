<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <title>Admin Dashboard</title>
Â  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
Â  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
Â  <style>
Â  Â  :root {
Â  Â  Â  --primary: #3498db;
Â  Â  Â  --primary-dark: #2980b9;
Â  Â  Â  --background: #f4f7fa;
Â  Â  Â  --card-bg: #ffffff;
Â  Â  Â  --text: #2c3e50;
Â  Â  Â  --muted: #7f8c8d;
Â  Â  Â  --border: #e0e0e0;
Â  Â  }

Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 40px 20px;
Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  background-color: var(--background);
Â  Â  Â  color: var(--text);
Â  Â  }

Â  Â  #admin-section {
Â  Â  Â  max-width: 700px;
Â  Â  Â  margin: auto;
Â  Â  Â  background: var(--card-bg);
Â  Â  Â  padding: 30px;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  box-shadow: 0 6px 18px rgba(0,0,0,0.05);
Â  Â  }

Â  Â  h2 {
Â  Â  Â  text-align: center;
Â  Â  Â  color: var(--text);
Â  Â  Â  margin-bottom: 25px;
Â  Â  }

Â  Â  label {
Â  Â  Â  display: block;
Â  Â  Â  margin-top: 15px;
Â  Â  Â  font-weight: 600;
Â  Â  Â  color: var(--text);
Â  Â  }

Â  Â  select {
Â  Â  Â  margin-top: 8px;
Â  Â  Â  padding: 10px;
Â  Â  Â  width: 100%;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  font-size: 1rem;
Â  Â  Â  outline: none;
Â  Â  }

Â  Â  textarea,
Â  Â  input[type="url"] {
Â  Â  Â  margin-top: 10px;
Â  Â  Â  padding: 10px;
Â  Â  Â  width: 100%;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  border-radius: 6px;
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  transition: border-color 0.3s ease;
Â  Â  }

Â  Â  textarea:focus,
Â  Â  input:focus,
Â  Â  select:focus {
Â  Â  Â  border-color: var(--primary);
Â  Â  }

Â  Â  .entry-block {
Â  Â  Â  background: #fff;
Â  Â  Â  border: 1px solid var(--border);
Â  Â  Â  border-radius: 10px;
Â  Â  Â  padding: 20px;
Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.03);
Â  Â  Â  transition: box-shadow 0.2s;
Â  Â  }

Â  Â  .entry-block:hover {
Â  Â  Â  box-shadow: 0 4px 18px rgba(0,0,0,0.06);
Â  Â  }

Â  Â  .entry-block img {
Â  Â  Â  margin-top: 15px;
Â  Â  Â  max-width: 100%;
Â  Â  Â  max-height: 250px;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
Â  Â  }

Â  Â  .action-button {
Â  Â  Â  background-color: var(--primary);
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  padding: 12px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  font-weight: bold;
Â  Â  Â  margin-top: 20px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: background-color 0.3s ease;
Â  Â  Â  width: 100%;
Â  Â  }

Â  Â  .action-button:hover {
Â  Â  Â  background-color: var(--primary-dark);
Â  Â  }

Â  Â  #status {
Â  Â  Â  margin-top: 15px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  text-align: center;
Â  Â  }
Â  </style>
</head>
<body>

<div id="admin-section">
Â  <h2>Update Section</h2>

Â  <label for="section-select">Select Section:</label>
Â  <select id="section-select">
Â  Â  <option value="default-content">Default Welcome</option>
Â  Â  <option value="res-exterior">Residential - Exterior</option>
Â  Â  <option value="res-interior">Residential - Interior</option>
Â  Â  <option value="com-exterior">Commercial - Exterior</option>
Â  Â  <option value="com-interior">Commercial - Interior</option>
Â  Â  <option value="line-painting">Line Painting</option>
Â  </select>

Â  <div id="entries-container"></div>

Â  <button class="action-button" type="button" onclick="addEntry()">âž• Add Image & Description</button>
Â  <button class="action-button" id="save-btn" onclick="saveSection()">ðŸ’¾ Save Section</button>
Â  <p id="status" role="status" aria-live="polite"></p>
</div>

<script>
Â  const firebaseConfig = {
Â  Â  apiKey: "AIzaSyBtndRroVa279cpMzQlIiphU1W9Uw_Yg6U",
Â  Â  authDomain: "kravin-delivery.firebaseapp.com",
Â  Â  projectId: "kravin-delivery",
Â  Â  storageBucket: "kravin-delivery.appspot.com",
Â  Â  messagingSenderId: "862159900289",
Â  Â  appId: "1:862159900289:web:18797ef8343e6329cb0780"
Â  };

Â  firebase.initializeApp(firebaseConfig);
Â  const db = firebase.firestore();

Â  const sectionSelect = document.getElementById('section-select');
Â  const entriesContainer = document.getElementById('entries-container');
Â  const status = document.getElementById('status');
Â  const saveBtn = document.getElementById('save-btn');

Â  sectionSelect.addEventListener('change', loadSection);
Â  window.onload = loadSection;

Â  function createEntryBlock(description = '', image = '') {
Â  Â  const entryDiv = document.createElement('div');
Â  Â  entryDiv.classList.add('entry-block');

Â  Â  const desc = document.createElement('textarea');
Â  Â  desc.placeholder = 'Enter description...';
Â  Â  desc.value = description;

Â  Â  const imgInput = document.createElement('input');
Â  Â  imgInput.type = 'url';
Â  Â  imgInput.placeholder = 'Paste image URL (e.g. Imgur or Firebase)';
Â  Â  imgInput.value = image;

Â  Â  const imgPreview = document.createElement('img');
Â  Â  imgPreview.style.display = image ? 'block' : 'none';
Â  Â  if (image) imgPreview.src = image;

Â  Â  imgInput.addEventListener('input', () => {
Â  Â  Â  const url = imgInput.value.trim();
Â  Â  Â  if (url) {
Â  Â  Â  Â  imgPreview.src = url;
Â  Â  Â  Â  imgPreview.style.display = 'block';
Â  Â  Â  } else {
Â  Â  Â  Â  imgPreview.src = '';
Â  Â  Â  Â  imgPreview.style.display = 'none';
Â  Â  Â  }
Â  Â  });

Â  Â  entryDiv.appendChild(desc);
Â  Â  entryDiv.appendChild(imgInput);
Â  Â  entryDiv.appendChild(imgPreview);
Â  Â  entriesContainer.appendChild(entryDiv);
Â  }

Â  function addEntry() {
Â  Â  createEntryBlock();
Â  }

Â  async function loadSection() {
Â  Â  const sectionId = sectionSelect.value;
Â  Â  status.style.color = 'black';
Â  Â  status.textContent = 'Loading section data...';
Â  Â  saveBtn.disabled = true;
Â  Â  entriesContainer.innerHTML = '';

Â  Â  try {
Â  Â  Â  const doc = await db.collection('sections').doc(sectionId).get();
Â  Â  Â  if (doc.exists) {
Â  Â  Â  Â  const data = doc.data();
Â  Â  Â  Â  const entries = Array.isArray(data.entries)
Â  Â  Â  Â  Â  ? data.entries
Â  Â  Â  Â  Â  : [{ description: data.description || '', image: data.image || '' }];
Â  Â  Â  Â  entries.forEach(entry => {
Â  Â  Â  Â  Â  createEntryBlock(entry.description, entry.image);
Â  Â  Â  Â  });
Â  Â  Â  Â  status.textContent = '';
Â  Â  Â  } else {
Â  Â  Â  Â  status.textContent = 'No saved data for this section yet.';
Â  Â  Â  Â  createEntryBlock();
Â  Â  Â  }
Â  Â  } catch (error) {
Â  Â  Â  status.style.color = 'red';
Â  Â  Â  status.textContent = 'ERROR loading section: ' + error.message;
Â  Â  } finally {
Â  Â  Â  saveBtn.disabled = false;
Â  Â  }
Â  }

Â  async function saveSection() {
Â  Â  const sectionId = sectionSelect.value;
Â  Â  const entryBlocks = entriesContainer.querySelectorAll('.entry-block');

Â  Â  const entries = [];
Â  Â  entryBlocks.forEach(block => {
Â  Â  Â  const desc = block.querySelector('textarea').value.trim();
Â  Â  Â  const img = block.querySelector('input[type="url"]').value.trim();
Â  Â  Â  if (desc || img) {
Â  Â  Â  Â  entries.push({ description: desc, image: img });
Â  Â  Â  }
Â  Â  });

Â  Â  if (entries.length === 0) {
Â  Â  Â  status.style.color = 'red';
Â  Â  Â  status.textContent = 'Please add at least one entry.';
Â  Â  Â  return;
Â  Â  }

Â  Â  saveBtn.disabled = true;
Â  Â  status.style.color = 'black';
Â  Â  status.textContent = 'Saving...';

Â  Â  try {
Â  Â  Â  await db.collection('sections').doc(sectionId).set({ entries }, { merge: true });
Â  Â  Â  status.style.color = 'green';
Â  Â  Â  status.textContent = 'Section saved successfully!';
Â  Â  } catch (error) {
Â  Â  Â  status.style.color = 'red';
Â  Â  Â  status.textContent = 'ERROR: ' + error.message;
Â  Â  } finally {
Â  Â  Â  saveBtn.disabled = false;
Â  Â  }
Â  }
</script>

</body>
</html>
